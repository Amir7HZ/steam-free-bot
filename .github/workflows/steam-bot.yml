name: Steam Free Games Bot

on:
  schedule:
    # ูุฑ ถ ุณุงุนุช ุงุฌุฑุง ุดูุฏ (ุณุงุนุช ฐุ ถุ ฑฒุ ฑธ UTC)
    - cron: '0 */6 * * *'
    
  # ุงูฺฉุงู ุงุฌุฑุง ุฏุณุช
  workflow_dispatch:
    inputs:
      manual_run:
        description: 'ุงุฌุฑุง ุฏุณุช ุฑุจุงุช'
        required: false
        default: 'ุขุฑู'

# ุชูุธูุงุช ูุญุท
env:
  TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
  CHAT_ID: ${{ secrets.CHAT_ID }}

jobs:
  check-and-send:
    runs-on: ubuntu-latest
    
    steps:
    # ูุฏู ฑ: ุฏุงูููุฏ ฺฉุฏ
    - name: ๐ฅ ุฏุงูููุฏ ฺฉุฏูุง ุฑูพู
      uses: actions/checkout@v3
      
    # ูุฏู ฒ: ูุตุจ ูพุงุชูู
    - name: ๐ ูุตุจ ูพุงุชูู ณ.ฑฐ
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
        
    # ูุฏู ณ: ูุตุจ ฺฉุชุงุจุฎุงููโูุง
    - name: ๐ฆ ูุตุจ ฺฉุชุงุจุฎุงููโูุง ููุฑุฏ ูุงุฒ
      run: |
        pip install requests beautifulsoup4 lxml
        
    # ูุฏู ด: ููุงุด ุงุทูุงุนุงุช
    - name: โน๏ธ ููุงุด ุงุทูุงุนุงุช
      run: |
        echo "๐ ุชุงุฑุฎ: $(date)"
        echo "๐ค ุฑุจุงุช ุงุณุชู ุฏุฑ ุญุงู ุงุฌุฑุง..."
        echo "๐ค ุขุฏ: $CHAT_ID"
        
    # ูุฏู ต: ุงุฌุฑุง ุฑุจุงุช
    - name: ๐ ุงุฌุฑุง ุฑุจุงุช ุงุตู
      run: python steam_bot.py
      
    # ูุฏู ถ: ูุงฺฏ ููููุช
    - name: โ ูุงฺฏ ููููุช
      if: success()
      run: |
        echo "๐ ุฑุจุงุช ุจุง ููููุช ุงุฌุฑุง ุดุฏ!"
        echo "โฐ ุฒูุงู ุจุนุฏ ุงุฌุฑุง: ถ ุณุงุนุช ุฏฺฏุฑ"
